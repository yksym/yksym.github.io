
テーマ
================

出されたお題

* 人間の相互理解の難しさ: 顧客の頭の中の要望をどう仕様に落とし、実装・テストを経てリリースしたか？
* 仕様記述にTLA+使ってみた話 => 以前書いた
     * 動機については [ここ](../spec20180810/memo.md) を参照
     * 使ってみた感想については [ここ](TLAReview.md) を参照
* 台本への回答案は [ここ](daihon.md)

概要
--------

* 関わったプロジェクトで作ったシステムの品質について悩まされた。
    * 出来たと思ったものが要望を満たせず、大幅な手戻りが発生したとか
    * 顧客と合意した受け入れテストはパスしたが、クレームが発生し、終わったと思ったプロジェクトがゾンビのように不意に襲いかかるとか。
* こういった品質の悪さの原因の１つに人間の相互理解の問題がある(他にも沢山あるけど)


品質とは？
-------

* 品質の定義
    * SWEBOK Wiki "品質とはシステムが特定環境下においてステークホルダー達からの明示的な要求や暗黙的な期待に応えられる程度"(意訳)[1]
    * バグ、いわゆるIEEE 982.1-2005 の defect（欠陥）の定義は、"設計者の認識の有無にかかわらず、すべての成果物において要件定義の誤り、仕様設計の誤り、プログラミングの誤り、システム構築の誤りなどにより「期待される結果」と乖離があるために、何かしらの対策・対応が必要と考えられる現象またはその原因。"[2]
    * 要求にスケジュールや金額面も含まれることを加味すると、そのプロジェクトが成功したかどうか、にかなり近い

* 上の定義を見ながら、過去にどんな失敗が発生したか覚えている範囲で振り返ってみると少なくとも下の6種類がある。
    1. 環境の定義に失敗
        * 実験施設ではうまくいくけど顧客が使いたかった場所では期待した動作にならない
        * ネットワーク特性(安定度やら帯域やら)、温度、OS、マシンスペック、電源スペック、依存ライブラリ、周辺機器の違いで期待した動作にならない
    2. ステークホルダーの定義に失敗
        * 開発者、エンドユーザー、オペレーター、発注者、販売・マーケティング関係スタッフ、法務関係スタッフ、というカテゴリがあり、その中にも複数人存在することが普通
        * 特に法律、ライセンス、特許周りの問題はショーストッパーになりえるので怖い
    3. 明示的な要望の解釈に失敗 or 暗黙的な期待の抽出に失敗
        * ステークホルダー達の目的や価値観が曖昧過ぎたり統一されていなかった
        * 開発側がどんなものを作ろうとしているのかを正しく伝えることにが出来なかった
        * 全員がそもそも何を作ろうとしているのか曖昧なまま物事を進めてしまった(とりあえず作ってみよう/みましたを最後まで続ける)
        * ドメイン知識や価値観の共有が出来ておらず、明文化されていない暗黙的な事前条件が崩れて手戻りが発生
    4. 明示的な要求を満たすことに失敗
        * 納期遅延(といいつつ、大抵の場合D固定でQを落とす方向に圧力がかかる)
        * 選定や発注の失敗(品質が悪いモノが来たり、納期が遅れたり）
        * 設計・実装時のバグ埋め込み及びその発覚が出来なかったり、修正が間に合わなかったり
            * 機能実装を優先してバグ修正や非機能テストを後回しにして半ビッグバンテスト状態になる
            * 特に時間的な耐久性や安定性の検証には時間がかかる(タグチメソッドとか色々試行錯誤はしてるけど)
    5. 動的に変化する要望/仕様やステークホルダを管理することに失敗
        * 適切な仕様管理、プロジェクト管理プロセスが導入されておらず、いつの間にか各ステークホルダーが異なるスケジュール、異なる仕様を見ている
* 特に、1,2,3,5は相互理解の欠如が原因となる傾向がある。(発生工程別に分類するバグ区分だといわゆる要求定義フェーズのバグ)
* 4の原因も沢山あるが・・・
    * QAについての学がなさすぎて品証関係作業の見積もりとスケジューリングがテキトー過ぎた・・・(リスクベースで考えるならもっと早い段階であのテストやっておけばとか)
    * 形式的に仕様を書いたりはしていたが、モジュールレベルの検査とかまでは出来てない。もちろん非同期系のバグとかは幾つか見つかった。

何から手をつける？
----------

ここで述べることはまだ試行錯誤中で成功している訳でもない。
正直な所、余裕がなくなると初歩的なことですら失敗する。まずは教科書通りの仕組みを導入したい。

* 全ステークホルダーが常に同じゴール(例えば仕様なりマイルストーンなり)を見ている状態をキープしたい
    * 方策はSyRS(システム要求仕様)を書いてメンテして定期的にステークホルダーで合意すること
    * フォーマットは[3]のテンプレートをベースにしてマイルストーンやリスク分析結果やテスト戦略っぽいものも含めるイメージ
    * インセプションデッキを定期見直しすることは既にやっているプロジェクトもあるが、ステークホルダーを集めるのは難しく、合意には手間がかかる・・・

* 顧客の要求や抱える問題についてヒアリングし、作ろうとしているモノについて説明し、適切なフィードバックを得たい
    * 人間は記述された情報を見ても、その誤り、曖昧さ、不足を見落としたり、無意識下で好き勝手に補間したり誤解したりしてしまう。
    * 対策は、環境・シナリオ・テストや評価方法といった点について極力具体化・限定してステークホルダーにvalidationしてもらうこと
        * 人間は欲しいモノの十分条件は分からなくても、必要条件を見つけることは得意(何が欲しいかうまく説明出来なくてもソレが欲しいかどうかは判定出来たりする)
        * 非エンジニアはモデルや分厚い資料よりは業務への影響やユーザーの体験といった視点で使い方やシナリオをベースに説明した方が良い(Tests as Documentation とか Specification by Example とかいう言葉もあるらしいし割と普通？)
    * 夢その1
        * 動く仕様。仕様書いたらモデルが"本物のように"動いてステークホルダーが操作出来る。
        * 普通のCUIなシミュレーションやAlloyのような可視化では見落としやすい(そもそも情報が多すぎ??)
        * 前職の同僚は状態遷移モデルならElmとかでいけるのでは？とかいってた
        * ハードも含めてAR/VRとかで体験できるといいな〜そのうちやりたいな〜
    * 夢その2
        * 森羅万象モデルを用意して業務フローや要求を表現する。こちらもVRで（マトリックスレベルの技術が必要なのでは??)


その他の失敗の思い出
----------------

* SRS運用で解決したいと思ってる失敗
    * ユーザーストーリーや仕様策定時に非機能面の記述が曖昧だったり低かったり(INVEST + アルファの指標が欲しい所)
    * スプリントレビューで実物を見せることは非常に重要だが、制約や環境といった点を説明していないと過度な期待を持たれる(forall 入力. forall 環境. always 上手く動くと思ってしまう)
    * 仕様と要求（や仮説）のトレーサビリティがなくてよく分からない素性の機能がある
    * too much な機能、無駄な機能を盛り込んでしまう(YAGNIを忘れる)
* 悩み
    * マルチプロジェクトや割り込みでスクラムが崩壊したりバックログが腐って当初のスケジュールを見失う
    * 工数の都合もあって要求の分析や仕様作成が受注の後（D固定でQ落とす方向への圧力が無意識化で発生しはじめる）

参考文献
-------

* [1] [SWEBOK](http://swebokwiki.org/)
* [2] [組込みソフトウェア開発における品質向上の勧め バグ管理手法編](https://www.ipa.go.jp/files/000027629.pdf)
* [3] [ソフトウェア要求](https://www.amazon.co.jp/ソフトウェア要求-第3版-Karl-Wiegers、Joy-Beatty/dp/4822298396)

